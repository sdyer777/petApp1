<!DOCTYPE html>
<html>

<head>
    <title>Pet Weather</title>
</head>
 
<body>

<!-- Page header -->
<table class="header">
    <tr>
        <td>
            <img src='https://upload.wikimedia.org/wikipedia/en/thumb/2/29/Harvard_shield_wreath.svg/1200px-Harvard_shield_wreath.svg.png' height=150 float=top>
        </td>
        <td>
            <span style="font-size:28px;">Harvard University</span><br>
            <span style="font-size:46px;">The Rex Fido School</span><br>
            <span style="font-size:22px;">of Animal and Meteorological Studies</span>
        <td>
    <tr>
</table>
<hr>

<!-- Pet list -->
<div id="petList">
<table class="list">
  <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Type</th>
        <th>Breed</th>
        <th>Location</th>
        <th>Latitude</th>
        <th>Longitude</th>
        <th>Take Umbrella?</th>
    </tr>
  </thead>

  <tbody>
    <% @parsed['pets'].each do |pet| %>
      <tr>
        <td><%= pet['id'] %></td>
        <td><%= pet['name'] %></td>
        <td><%= pet['type'] %></td>
        <td><%= pet['breed'] %></td>
        <td><%= pet['location'] %></td>
        <td><%= pet['latitude'] %></td>
        <td><%= pet['longitude'] %></td>
        <td><button type="button" class="btnNoBackground" onclick="openTakeUmbrellaForm(<%= pet['id'] %>)">Check Weather</button><td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<button type="button" class="btnWithBackground" onclick="openForm()">Add</button>
</div>

<!-- Check Weather form -->
<div class="form-popup-center" id="takeUmbrellaForm">
  <form class="form-container">
    <h1>Should Fifi Take an Umbrella?</h1>

    Yes, Fifi should play it safe and take an umbrella.<br><br>
    The chance of precipitation in Paris is moderate - 47%.  <br>
    <br>
    <br>
    <button type="button" class="btn cancel" onclick="closeTakeUmbrellaForm()">Close</button>
  </form>
</div>


<!-- New Pet form -->
<div class="form-popup" id="myForm">
  <form onsubmit="return saveForm()" class="form-container">
    <h1>New Pet </h1>

    <table>
        <tr>
            <td>
    <label for="email"><b>Name</b></label>    
    <input type="text" placeholder="Enter pet name" name="name" required>

    <label for="psw"><b>Type</b></label>
    <input type="text" placeholder="Enter pet type" name="type" required>

    <label for="psw"><b>Breed</b></label>
    <input type="text" placeholder="Enter pet breed" name="breed" required>

            </td>
            <td rowspan=3>
    <span style="padding-left:15px;">&nbsp;</span>
            </td>
            <td>
    <label for="psw"><b>Location</b></label>
    <input type="text" placeholder="Enter pet location" name="location" required>

    <label for="psw"><b>Latitude</b></label>
    <input type="text" placeholder="Enter location latitude" name="latitude" required>

    <label for="psw"><b>Longitude</b></label>
    <input type="text" placeholder="Enter location longitude" name="longitude" required>
</td>
<tr>
</table>
    <button type="submit" class="btn">Save</button>
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>

<!-- Javascript -->
<script>
function openTakeUmbrellaForm(id) {
    url = '../details/index/' + id
    window.open(url, '_self');
}

function closeTakeUmbrellaForm() {
  document.getElementById("takeUmbrellaForm").style.display = "none";
  document.getElementById("petList").style.display = "block";
}


function openForm() {
  document.getElementById("petList").style.display = "none";
  document.getElementById("myForm").style.display = "block";
}

function saveForm() {
  alert("Saved");
  location.reload();
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
  document.getElementById("petList").style.display = "block";
}

function Get(yourUrl) {
    var Httpreq = new XMLHttpRequest(); // a new request
    Httpreq.open("GET",yourUrl,false);
    Httpreq.send(null);
    return Httpreq.responseText;          
}

</script>

</body>

</html>
